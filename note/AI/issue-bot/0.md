大概几个月前 有想过写一个类似的issue-bot 然后写一半不出意外的鸽掉了，因为发现有好用的现成的了...

链接：[Getting Started - SWE-agent documentation](https://swe-agent.com/latest/)

# docs：SWE-agent  

SWE-agent 是一个创新项目，它部署了一位*AI软件工程师*来自主修复GitHub问题。 
其核心架构中，**智能体（Agent）**接收**问题描述（Problem Statement）**（即任务），随后利用**大语言模型（LLM）**作为"大脑"生成"思考"和"动作"。

这些动作通常涉及专用的**工具与工具包（Tools & Tool Bundles）**，并在隔离的**环境（与部署）**中执行。所有交互和决策都被 meticulously 记录在**轨迹（Trajectory）**中，这对调试和学习至关重要。

为了确保系统能理解LLM的输出，**动作解析器（Action Parsers）**会将原始模型响应转换为可执行命令。整个系统的行为——从使用的LLM到可用工具——都可通过全面的**配置系统**高度定制。  

## 可视化

```mermaid  
flowchart TD  
    A0["智能体"]  
    A1["环境（与部署）"]  
    A2["工具与工具包"]  
    A3["配置系统"]  
    A4["大语言模型"]  
    A5["问题描述"]  
    A6["轨迹"]  
    A7["动作解析器"]  
    A0 -- "在环境中执行动作" --> A1  
    A0 -- "调用" --> A2  
    A0 -- "查询" --> A4  
    A0 -- "接收任务" --> A5  
    A0 -- "记录交互" --> A6  
    A0 -- "使用" --> A7  
    A1 -- "托管" --> A2  
    A3 -- "配置" --> A0  
    A3 -- "设置" --> A1  
    A3 -- "定义" --> A2  
    A3 -- "指定" --> A4  
    A3 -- "定义输入方式" --> A5  
    A3 -- "选择" --> A7  
    A4 -- "生成原始输出" --> A7  
    A6 -- "为配置系统提供演示" --> A3  
    A7 -- "提供解析后动作" --> A0  
```

## 章节  

1. [问题描述](01_problem_statement_.md)  
2. [智能体](02_agent_.md)  
3. [大语言模型](03_language_model__llm__.md)  
4. [动作解析器](04_action_parsers_.md)  
5. [工具与工具包](05_tools___tool_bundles_.md)  
6. [环境（与部署）](06_environment__and_deployment__.md)  
7. [配置系统](07_configuration_system_.md)  
8. [轨迹](08_trajectory_.md)  

---

## 架构图  

![image-20251112130954417](image-20251112130954417.png)

- SWE-agent的核心入口是`sweagent`命令行可执行文件（1）。
- 它会初始化一个`SWEEnv`类（2）的实例，用于管理环境。
- 在SWE-agent 1.0中，这个类现在只是对`SWE-ReX`包的薄封装。
- 初始化时，`SWEEnv`会初始化`SWE-ReX`的`Deployment`。`Deployment`会启动一个本地Docker容器（4），或者在远程系统（如Modal或AWS）上启动容器（3）。
- 在容器内部，`SWE-ReX`会启动一个Shell会话（5），用于执行命令。
- `SWE-ReX`还会安装ACI元素作为自定义工具（9），这些工具可供Shell会话使用。  

第二个初始化的类是`Agent`（6）。它可以通过YAML文件进行配置（参见配置部分）。其最重要的方法是`forward()`，它会提示模型并执行其动作。  

- 为了提示模型，需要将历史记录（所有对模型的提示、动作和输出）发送给语言模型（LM）。
- 为了充分利用模型的上下文窗口，历史记录会通过`HistoryProcessor`（7）进行压缩。
- 模型输出（8）随后由`Agent`类解析（特别是使用解析器提取动作），并通过`SWEEnv`（10）在Shell会话中执行。  

为此，`SWEEnv`持有`SWE-ReX`的`Deployment`类，该类与运行在Docker容器内的服务器（11）通信。
