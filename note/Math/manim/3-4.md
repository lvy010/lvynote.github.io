# 第2章：场景系统

欢迎回到Manim世界！在[上一章](01_mobject__mathematical_object__.md)中，我们学习了`Mobject`——构成Manim动画的基本元素。我们掌握了如何创建`Circle`这样的`Mobject`并设置其颜色，但尚未让这些图形真正显示在屏幕上。

这正是`Scene`（场景）的用武之地。

## 场景的核心作用：动画舞台

想象你在导演一部舞台剧。已有演员（`Mobject`）和道具，但表演需要舞台！在Manim中，`Scene`就是这个舞台，是动画呈现的主画布。它解决了以下关键问题：
- **元素管理**：控制哪些`Mobject`可见
- **时序编排**：决定元素何时出现、移动或变化
- **渲染输出**：将逐帧动画合成为最终视频

没有`Scene`，`Mobject`只是内存中的抽象对象。场景系统是将代码转化为视觉叙事的核心枢纽。

## 场景的本质

`Scene`是一个继承自Python类的动画导演。运行Manim脚本时，系统会自动寻找继承`Scene`的类并执行其`construct`方法。这个方法是动画的"剧本"，包含所有视觉指令。

### 核心方法
| 方法                 | 作用                     | 示例                     |
| -------------------- | ------------------------ | ------------------------ |
| `construct(self)`    | **必需** 编写动画逻辑    | `def construct(self):`   |
| `self.add(*mobs)`    | 立即添加元素到场景       | `self.add(circle)`       |
| `self.remove(*mobs)` | 立即移除场景元素         | `self.remove(square)`    |
| `self.play(*anims)`  | 播放动画效果（详见下章） | `self.play(Create(dot))` |
| `self.wait(sec)`     | 暂停指定秒数             | `self.wait(1.5)`         |

## 第一个场景实例

让我们实现上章的蓝色圆形显示：

```python
from manimlib.scene.scene import Scene
from manimlib.mobject.geometry import Circle
from manimlib.constants import BLUE
from manimlib.animation.creation import Create  # 用于创建动画

class BlueCircleScene(Scene):
    def construct(self):
        # 创建蓝色圆形
        circle = Circle(color=BLUE)
        
        # 播放创建动画
        self.play(Create(circle))
        
        # 停留2秒
        self.wait(2)
```

**运行命令**：
```bash
manimgl my_scene.py BlueCircleScene -p
```
参数说明：
- `-p` 预览动画
- `-w` 保存为视频文件

执行后将看到蓝色圆形逐渐绘制的动画，持续2秒后关闭窗口。

## 场景运作机制

### 生命周期流程
1. **初始化阶段**  
   - 创建`Camera`摄像机（负责画面捕捉）
   - 初始化`SceneFileWriter`视频写入器
   - 准备`self.mobjects`列表（存储当前可见元素）

2. **执行阶段**  
   ```mermaid
   sequenceDiagram
       participant CLI as 命令行
       participant Scene as 场景实例
       CLI->>Scene: 执行run()
       Scene->>Scene: 初始化摄像机/写入器
       Scene->>Scene: 调用construct()
       Scene->>Scene: 添加圆形并播放动画
       loop 每帧处理
           Scene->>Scene: 更新元素状态
           Scene->>Camera: 捕捉当前帧
           Camera->>FileWriter: 写入帧数据
       end
       Scene->>CLI: 完成渲染
   ```

3. **动画处理**  
   `self.play()`调用时：
   - 计算动画起止间的中间帧
   - 每帧更新元素属性（位置/颜色等）
   - 调用摄像机捕捉当前画面

### 代码结构
```python
class Scene:
    def __init__(self):
        self.camera = Camera()          # 画面捕捉
        self.file_writer = FileWriter() # 视频输出
        self.mobjects = []              # 可见元素列表

    def play(self, *animations):
        for frame in animation_frames:
            self.update_elements()      # 更新元素状态
            self.camera.capture()       # 拍摄当前帧
            self.file_writer.write()    # 写入帧数据
```

现在已掌握静态元素展示，接下来将学习[动画系统](03_animation_.md)，让元素动起来！

[下一章：动画系统](03_animation_.md)

